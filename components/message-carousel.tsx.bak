"use client"

import { useState, useEffect } from "react"
import { Button } from "@/components/ui/button"
import { ChevronLeft, ChevronRight } from "lucide-react"

const messages = [
  {
    id: 1,
    text: "Happy Birthday To You Bau",
    emoji: "ğŸ‚ğŸ‰",
    image: "/images/birthday1.jpg",
    secondImage: "/images/birthday2.jpg",
  },
  {
    id: 2,
    text: "Aagadi jata admission hetau nik se padhye badka aadmi bann",
    emoji: "â¤ï¸",
    image: null,
    secondImage: null,
  },
  {
    id: 3,
    text: "I know i'm late because i didn't noticed the time. I'm sorry",
    emoji: "ğŸ˜”ğŸ˜”",
    image: "/images/birthday2.jpg",
    secondImage: null,
  },
  {
    id: 4,
    text: "Once again, Happy Birthday Bakho",
    emoji: "ğŸ‚ğŸ‰ğŸ¥³",
    image: "/images/birthday1.jpg",
    secondImage: "/images/birthday2.jpg",
  },
]

export function MessageCarousel() {
  const [currentIndex, setCurrentIndex] = useState(0)
  const [isVisible, setIsVisible] = useState(false)

  useEffect(() => {
    setIsVisible(true)
  }, [])

  useEffect(() => {
    setIsVisible(false)
    setTimeout(() => setIsVisible(true), 100)
  }, [currentIndex])

  const handleNext = () => {
    setCurrentIndex((prev) => (prev + 1) % messages.length)
  }

  const handlePrevious = () => {
    setCurrentIndex((prev) => (prev - 1 + messages.length) % messages.length)
  }

  useEffect(() => {
    const handleKeyPress = (e: KeyboardEvent) => {
      if (e.key === "ArrowRight") handleNext()
      if (e.key === "ArrowLeft") handlePrevious()
    }
    window.addEventListener("keydown", handleKeyPress)
    return () => window.removeEventListener("keydown", handleKeyPress)
  }, [])

  const currentMessage = messages[currentIndex]

  return (
    <div className="fixed inset-0 flex items-center justify-center bg-gradient-to-br from-pink-300 via-purple-300 to-blue-300 overflow-hidden">
      {/* Floating hearts */}
      <div className="absolute inset-0">
        {[...Array(20)].map((_, i) => (
          <div
            key={i}
            className="absolute animate-float-hearts"
            style={{
              left: `${Math.random() * 100}%`,
              bottom: "-5%",
              animationDelay: `${Math.random() * 5}s`,
              animationDuration: `${6 + Math.random() * 4}s`,
            }}
          >
            <span className="text-4xl opacity-40">ğŸ’–</span>
          </div>
        ))}
      </div>

      {/* Message card */}
      <div
        className={`relative z-10 max-w-4xl w-full mx-4 transition-all duration-500 transform ${
          isVisible ? "opacity-100 scale-100 translate-y-0" : "opacity-0 scale-95 translate-y-4"
        }`}
      >
        <div className="bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl p-8 md:p-12 border-4 border-purple-400">
          {/* Message number */}
          <div className="text-center mb-6">
            <span className="inline-block bg-gradient-to-r from-pink-500 to-purple-500 text-white px-6 py-2 rounded-full text-lg font-bold">
              Message {currentIndex + 1} of {messages.length}
            </span>
          </div>

          {(currentMessage.image || currentMessage.secondImage) && (
            <div className="mb-8 flex flex-col items-center">
              {currentMessage.image && (
                <div className="mb-4 w-full max-w-md">
                  <div className="relative rounded-2xl overflow-hidden shadow-xl border-4 border-purple-300 animate-scale-in">
                    <img
                      src={currentMessage.image || "/placeholder.svg"}
                      alt="Birthday memory"
                      className="w-full h-auto object-cover rounded-xl"
                      loading="eager"
                    />
                  </div>
                </div>
              )}
              {currentMessage.secondImage && (
                <div className="w-full max-w-md">
                  <div className="relative rounded-2xl overflow-hidden shadow-xl border-4 border-purple-300 animate-scale-in">
                    <img
                      src={currentMessage.secondImage || "/placeholder.svg"}
                      alt="Birthday memory"
                      className="w-full h-auto object-cover rounded-xl"
                      loading="eager"
                    />
                  </div>
                </div>
              )}
            </div>
          )}

          {/* Message text */}
          <div className="text-center space-y-6 mb-8">
            <h2 className="text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-600 to-purple-600 leading-tight animate-gradient-text text-balance">
              {currentMessage.text}
            </h2>
            <p className="text-6xl animate-bounce-slow">{currentMessage.emoji}</p>
          </div>

          {/* Navigation buttons */}
          <div className="flex items-center justify-center gap-4 mt-8">
            <Button
              onClick={handlePrevious}
              disabled={currentIndex === 0}
              size="lg"
              className="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white rounded-full px-8 py-6 text-lg font-bold disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 hover:scale-110 shadow-lg"
            >
              <ChevronLeft className="w-6 h-6 mr-2" />
              Previous
            </Button>

            <Button
              onClick={handleNext}
              disabled={currentIndex === messages.length - 1}
              size="lg"
              className="bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white rounded-full px-8 py-6 text-lg font-bold disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 hover:scale-110 shadow-lg"
            >
              Next
              <ChevronRight className="w-6 h-6 ml-2" />
            </Button>
          </div>

          {/* Progress dots */}
          <div className="flex justify-center gap-3 mt-8">
            {messages.map((_, index) => (
              <button
                key={index}
                onClick={() => setCurrentIndex(index)}
                className={`w-3 h-3 rounded-full transition-all duration-300 ${
                  index === currentIndex
                    ? "bg-gradient-to-r from-pink-500 to-purple-500 w-8"
                    : "bg-purple-300 hover:bg-purple-400"
                }`}
              />
            ))}
          </div>
        </div>
      </div>
    </div>
  )
}
